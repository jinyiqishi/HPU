<!--
-- by jeneser
-- 教务公告-通知公告-文章页
-- URL：http://jwc.hpu.edu.cn/jwc/news.jsp?id=1128
-->

<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
	<title>教务公告-文章页</title>
</head>
<body id="body">
	<textarea id="cont">
		获取内容...
	</textarea> 
	<button id="butt">点我获取</button>
	<script type="text/javascript">
		var cont = document.getElementById("body");
		var butt = document.getElementById("butt");
		butt.addEventListener("click", fetch)
		function fetch (argument) {
			var ajax = new XMLHttpRequest();
			ajax.onreadystatechange = function() {
				if (ajax.readyState == 4 && ajax.status == 200) {
					var response = ajax.responseText;
					//获取整个内容,并去掉水平线和BR
					var hole = response.match(/<HR class=hr>(.|\n|\s)*?<BR>/ig).toString().replace(/<HR class=hr>/, '').replace(/<BR>/, '');
					
					alert(hole);
					cont.innerHTML = hole;
					alert(1);
				}
			};
			ajax.open("get", "http://cors.itxti.net/?jwc.hpu.edu.cn/jwc/news.jsp?id=1128", true);
			ajax.setRequestHeader("Content-type", "application/x-www-form-urlencoded;charset=gb2312");
			ajax.send();

		}
	</script>
</body>
</html>